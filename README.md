# Tor PQC 채팅 애플리케이션

이 프로젝트는 안전한 통신을 위해 양자 이후 암호(Post-Quantum Cryptography, PQC)를 사용하는 The Oninon Routingr기반 채팅 애플리케이션입니다. 메시지 암호화, 복호화, 사용자 인증, 실시간 채팅 등의 기능을 제공합니다. 이 프로젝트는 Flask를 웹 서버로 사용하며, Python을 백엔드 로직으로, Kyber512를 PQC 암호화 알고리즘으로 사용합니다.

---

## **기능**

### **핵심 기능**
- **사용자 등록**: 새로운 사용자가 고유 ID와 비밀번호로 등록할 수 있습니다.
- **사용자 로그인**: 등록된 사용자가 로그인하여 채팅방에 접근할 수 있습니다.
- **1:1 메시지**: 암호화된 메시지를 보내고 받을 수 있습니다.

### **보안 기능**
- **양자 이후 암호화**: Kyber512를 사용하여 양자 공격에 저항하는 안전한 통신을 제공합니다.
- **종단 간 암호화**: Kyber에서 파생된 공유 비밀 키를 사용하여 메시지를 암호화합니다.
- **중간 노드 암호화**: AES-GCM을 사용하여 중간 노드 전송 중 데이터 보안을 보장합니다.

---

## **기술 스택**

### **백엔드**
- **Flask**: 서버 측 로직을 위한 Python 웹 프레임워크.
- **소켓 프로그래밍**: 클라이언트와 중앙 서버 간의 통신.
- **Kyber512**: PQC를 위한 `oqs` 라이브러리를 사용.
- **AES-GCM**: 메시지의 대칭 암호화를 위해 사용.

### **프론트엔드**
- **HTML/CSS**: 사용자 등록, 로그인, 채팅을 위한 반응형 인터페이스.
- **JavaScript**: 동적 업데이트와 서버 데이터 fetch 처리.

---

## **시작하기**

### **1. 사전 준비**
- Python 3.8+
- Kyber 암호화를 위한 `oqs` 라이브러리.
- Flask 프레임워크
- Cryptography 라이브러리


### **2. 프로젝트 구조**
```plaintext
├── app.py                # 주요 애플리케이션 로직
├── templates/            # 웹 페이지를 위한 HTML, CSS, JS 템플릿
└── README.md             # 프로젝트 문서
```

---

## **작동 방식**

### **1. 사용자 등록**
- 사용자 이름, ID, 비밀번호를 입력하여 등록.
- Kyber512 공개키와 비밀키 쌍을 생성하고 로컬에 저장.

### **2. 로그인**
- 사용자 ID와 비밀번호로 인증.
- 성공적으로 로그인하면 세션이 시작되고 채팅방에 접근 가능.

### **3. 메시지 전송**
- Kyber512로 파생된 공유 비밀 키를 사용하여 메시지를 암호화.
- 암호화된 메시지는 중앙 서버로 전송되어 수신자에게 전달.


---

## **API 엔드포인트**

### **인증**
- `POST /register`: 새로운 사용자 등록.
- `POST /login`: 기존 사용자 인증.

### **메시징**
- `GET /get_messages`: 사용자의 메시지 가져오기.
- `POST /send_message`: 대상 사용자에게 메시지 전송.
- `POST /update_status`: 메시지 상태를 `읽음`으로 업데이트.

### **채팅 관리**
- `GET /chat_rooms`: 사용 가능한 채팅방 표시.
- `GET /chat_room?target_user=<user>`: 특정 사용자와의 채팅 열기.

---

## **사용법**

### **1. 새로운 사용자 등록**
- 등록 페이지에 접속.
- 이름, ID, 비밀번호를 입력.
- 폼을 제출하여 계정을 생성.

### **2. 로그인**
- 로그인 페이지로 이동.
- ID와 비밀번호를 입력.
- 성공하면 채팅방에 접근 가능.

### **3. 메시지 보내기**
- 채팅방 목록에서 사용자를 선택.
- 메시지를 입력하고 "Send"를 클릭.
- 메시지가 암호화되어 안전하게 전달.

---

## **TODO / 향후 개선 사항**
- **읽음/안 읽음 상태 개선**: 상대방이 메시지를 읽었는지 확인하는 기능 추가.
- **회원 정보 보안 강화**: 사용자 비밀번호 암호화 및 더 안전한 인증 메커니즘 도입.
- **TLS 통신에 PQC 추가**: 서버와 클라이언트 간의 TLS 연결에서 PQC 지원 구현.
- **실시간 메시징**: WebSocket을 사용하여 더 빠른 실시간 메시지 전송 구현.
- **데이터베이스 도입**: 메시지 및 사용자 데이터를 저장하기 위한 데이터베이스 추가.
- **그룹 채팅 기능**: 다자간 채팅 지원.
- **UI/UX 개선**: 사용자 경험을 향상시키기 위한 인터페이스 개선.

---
